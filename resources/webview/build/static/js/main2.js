(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{125:function(e,t,a){e.exports=a(215)},127:function(e,t,a){},132:function(e,t,a){},135:function(e,t,a){},192:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){"use strict";a.r(t);a(126),a(127);var n=a(0),r=a.n(n),s=a(7),o=a.n(s);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(132);var c=a(218),l=a(50),i=a(21),u=a(20),m=a.n(u),p=a(29),h=a(22),d=a(23),g=a(25),f=a(24),v=a(26),b=a(220),E=a(51),y=a.n(E),w={postMessage:console.log};try{w=acquireVsCodeApi()}catch(pe){}var O={};function S(e){var t=e.fnName,a=e.region;return new Promise((function(e){var n=Math.random();w.postMessage({command:"getLambdaOverview",messageId:n,payload:{fnName:t,region:a}}),O[n]=function(t){t.error?e({overviewProps:{},error:t.error}):e({overviewProps:t})}}))}function k(e){var t=e.logGroupName,a=e.nextToken,n=e.region;return new Promise((function(e){var r=Math.random();w.postMessage({command:"getLogStreams",messageId:r,payload:{nextToken:a,logGroupName:t,region:n}}),O[r]=function(t){t.error?e({logStreams:[],error:t.error}):e({nextToken:t.nextToken,logStreams:t.logStreams})}}))}function j(e){return new Promise((function(t){var a=Math.random();w.postMessage({command:"getLogEvents",messageId:a,payload:{nextToken:e.nextToken,logGroup:e.logGroup,logStream:e.logStream}}),O[a]=function(e){t({nextBackwardToken:e.nextBackwardToken,nextForwardToken:e.nextForwardToken,logEvents:e.logEvents})}}))}function P(e){return new Promise((function(t,a){var n=Math.random();w.postMessage({command:"addService",messageId:n,payload:e}),O[n]=function(e){e.error?a({message:e.error}):t()}}))}window.addEventListener("message",(function(e){var t=e.data;O[t.messageId]&&(O[t.messageId](t.payload),delete O[t.messageId])}));var N=a(221),x=a(222),M=a(86),C=a.n(M),T=(a(135),a(226)),R=a(113),I=a(110),L=a.n(I),B=a(91);T.a.registerLanguage("json",R.a);var A=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).state={copyStr:"copy JSON to clipboard",searched:!1,loaded:!1},a.myRef=void 0,a.myRef=r.a.createRef(),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({loaded:!0})}),0)}},{key:"componentDidUpdate",value:function(){var e=this;if(this.props.search){!1===this.state.searched&&this.setState({searched:!0});var t=new C.a(this.myRef.current);t.unmark({done:function(){t.mark(e.props.search,{acrossElements:!0,separateWordSearch:!1})}})}else if(this.state.searched){new C.a(this.myRef.current).unmark()}}},{key:"renderWithJson",value:function(e){var t=this,a=function(e){var t=e.match(/{[\s\S]*}/);if(t)try{var a=JSON.parse(t[0]),n=e.split(t[0]);return[n[0],JSON.stringify(a,null,2),n[1]]}catch(pe){return!1}return!1}(e);return a?r.a.createElement("div",{className:"logevent-longmessage"},r.a.createElement("div",null,a[0]),r.a.createElement("div",{className:"code-wrapper"},r.a.createElement(B.a,{size:"small",onClick:function(e){e.currentTarget.blur(),L()(a[1]),t.setState({copyStr:"copied"}),setTimeout((function(){t.setState({copyStr:"copy JSON to clipboard"})}),1e3)}},this.state.copyStr),r.a.createElement(T.a,{className:"syntax-highlighter",useInlineStyles:!1,language:"json",showLineNumbers:!0},a[1])),r.a.createElement("div",null,a[2])):r.a.createElement("div",{className:"logevent-longmessage"},e)}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.myRef},this.state.loaded?this.renderWithJson(this.props.message):r.a.createElement("div",null,"loading"))}}]),t}(r.a.Component);var D=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;setInterval((function(){return e.setState({interval:Date.now()})}),1e4)}},{key:"render",value:function(){return r.a.createElement("span",{className:this.props.className},y()(this.props.time).fromNow())}}]),t}(r.a.Component);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var V=b.a.Panel,G=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={search:"",groupPerRequest:document.vscodeData.groupPerRequest,loaded:!1,preparedMessages:[],messages:[]},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({logGroup:this.props.logGroup,logStream:this.props.logStream});case 2:t=e.sent,a=t.logEvents,n=t.nextBackwardToken,r=t.nextForwardToken,this.setState({loaded:!0,nextBackwardToken:n,nextForwardToken:r,messages:a.map((function(e,t){return{timestamp:e.timestamp,messageShort:e.message.slice(0,500),messageLong:e.message}})),preparedMessages:F(a.map((function(e,t){return{timestamp:e.timestamp,messageShort:e.message.slice(0,500),messageLong:e.message}})),this.state.groupPerRequest,this.state.search)});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onRetryNew",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loadingNew:!0}),e.next=3,j({logGroup:this.props.logGroup,logStream:this.props.logStream,nextToken:this.state.nextForwardToken});case 3:t=e.sent,a=t.logEvents,n=t.nextForwardToken,this.setState({loadingNew:!1,messages:[].concat(Object(i.a)(this.state.messages),Object(i.a)(a.map((function(e,t){return{timestamp:e.timestamp,messageShort:e.message.slice(0,500),messageLong:e.message}})))),preparedMessages:F([].concat(Object(i.a)(this.state.messages),Object(i.a)(a.map((function(e,t){return{timestamp:e.timestamp,messageShort:e.message.slice(0,500),messageLong:e.message}})))),this.state.groupPerRequest,this.state.search),nextForwardToken:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onRetryOld",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loadingOld:!0}),e.next=3,j({logGroup:this.props.logGroup,logStream:this.props.logStream,nextToken:this.state.nextBackwardToken});case 3:t=e.sent,a=t.logEvents,n=t.nextBackwardToken,this.setState({loadingOld:!1,messages:[].concat(Object(i.a)(a.map((function(e,t){return{timestamp:e.timestamp,messageShort:e.message.slice(0,500),messageLong:e.message}}))),Object(i.a)(this.state.messages)),preparedMessages:F([].concat(Object(i.a)(a.map((function(e,t){return{timestamp:e.timestamp,messageShort:e.message.slice(0,500),messageLong:e.message}}))),Object(i.a)(this.state.messages)),this.state.groupPerRequest,this.state.search),nextBackwardToken:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.loaded?[r.a.createElement("div",{className:"logstream-options",key:"options"},r.a.createElement(N.a.Search,{onChange:function(t){e.setState({search:t.target.value,preparedMessages:F(e.state.messages,e.state.groupPerRequest,t.target.value)})},value:this.state.search,placeholder:"search",allowClear:!0,size:"small"}),r.a.createElement(x.a,{checked:this.state.groupPerRequest,onChange:function(t){e.setState({groupPerRequest:t.target.checked,preparedMessages:F(e.state.messages,t.target.checked,e.state.search)})}},"Group per request")),r.a.createElement("div",{className:"retry-message retry-message-old",key:"retryold"},this.state.loadingOld?"loading older events...":r.a.createElement("span",null,"No older events found at the moment.",r.a.createElement("span",{className:"spanlink retry-link",onClick:this.onRetryOld.bind(this)},"Retry"))),r.a.createElement(b.a,{key:"collapse",bordered:!1},this.state.preparedMessages.map((function(t){return r.a.createElement(V,{key:t.key,className:0===t.searchMatches?"blurforsearch":"",header:r.a.createElement("div",{className:"logevent-header"},r.a.createElement(D,{className:"relative-time",time:t.timestamp}),r.a.createElement("span",{className:"abs-time"},y()(t.timestamp).format("lll")),r.a.createElement("span",{className:"logevent-shortmessage"},t.searchMatches>0&&r.a.createElement("span",{className:"event-tag matches"},"matches: ",t.searchMatches),t.shortMessageMatched&&t.shortMessageMatched.length?t.shortMessageMatched.map((function(e){return r.a.createElement("span",{className:"event-tag"},e)})):t.messageShort))},t.messagesLong.map((function(t,a){return r.a.createElement(A,{key:a,message:t,search:e.state.search})})))}))),r.a.createElement("div",{className:"retry-message retry-message-new",key:"retrynew"},this.state.loadingNew?"loading new events...":r.a.createElement("span",null,"No newer events found at the moment.",r.a.createElement("span",{className:"spanlink retry-link",onClick:this.onRetryNew.bind(this)},"Retry")))]:r.a.createElement("div",{className:"retry-message"},"loading new events...")}}]),t}(r.a.Component);function F(e,t,a){var n=[],r=e.map((function(e,t){var r="",s=e.messageLong.match(/START RequestId: ([a-zA-z0-9-]*)/),o=e.messageLong.match(/REPORT RequestId: ([a-zA-z0-9-]*)/),c=!0,i=!1,u=void 0;try{for(var m,p=n[Symbol.iterator]();!(c=(m=p.next()).done);c=!0){var h=m.value;if(e.messageShort.includes(h)){r=h;break}}}catch(pe){i=!0,u=pe}finally{try{c||null==p.return||p.return()}finally{if(i)throw u}}s&&(n.push(s[1]),r=s[1]);var d=[];if(o){r=o[1];var g=e.messageShort.match(/Duration: (.*?) ms/),f=e.messageShort.match(/Max Memory Used: (.*?) MB/),v=e.messageShort.match(/Init Duration: (.*?) ms/);v&&d.push("init: ".concat(v[1]," ms")),g&&d.push("".concat(g[1]," ms")),f&&d.push("".concat(f[1]," MB"))}var b=-1;if(a){var E=a.replace(/\s\s+/g," ").toLowerCase(),y=function(e){var t=e.match(/{[\s\S]*}/);if(t)try{var a=JSON.parse(t[0]),n=e.split(t[0]);return"".concat(n[0],"\n      ").concat(JSON.stringify(a,null,2),"\n      ").concat(n[1])}catch(pe){return e}return e}(e.messageLong).replace(/\s\s+/g," ").toLowerCase().match(new RegExp(E,"g"));b=y?y.length:0}var w="".concat(t,"-").concat(e.timestamp);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{requestId:r||w,messagesLong:[e.messageLong],shortMessageMatched:d,searchMatches:b,index:t,key:w})}));if(!t)return r;var s=r.reduce((function(e,t){return e[t.requestId]?e[t.requestId].push(t):e[t.requestId]=[t],e}),{}),o=[];return Object.keys(s).forEach((function(e){var t,a=s[e],n=a.find((function(e){return e.shortMessageMatched.length}));n&&(t=n.shortMessageMatched),o.push({timestamp:a[0].timestamp,key:a[0].key,index:a[0].index,shortMessageMatched:t,searchMatches:a.reduce((function(e,t){return e+t.searchMatches}),0),messageShort:a[0].messageShort,messagesLong:a.map((function(e){return e.messageLong}))})})),o.sort((function(e,t){return e.index-t.index}))}var W=b.a.Panel,z=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"log-section"},r.a.createElement("header",null,r.a.createElement("h2",null,"Logs")),this.props.loaded?r.a.createElement("div",null,r.a.createElement(b.a,{className:"logstreamslist"},this.props.error?r.a.createElement("div",{className:"foreground-color"},this.props.error):this.props.logStreams.sort((function(e,t){return t.sortByTimestamp-e.sortByTimestamp})).map((function(t){return r.a.createElement(W,{header:r.a.createElement("div",{className:"logstream"},r.a.createElement(D,{className:"relative-time",time:t.sortByTimestamp}),r.a.createElement("span",{className:"abs-time"},y()(t.sortByTimestamp).format("lll"))),key:t.arn},r.a.createElement(G,{logGroup:e.props.tab.logs,logStream:t.logStreamName}))}))),this.props.nextToken&&r.a.createElement("div",{className:" loadmore"},this.props.loadMoreInProgress?r.a.createElement("span",null,"loading..."):r.a.createElement("span",{className:"spanlink",onClick:this.props.onLoadMore},"Load more"))):r.a.createElement("div",null,"loading"))}}]),t}(r.a.Component),U=(a(192),a(224)),J=U.a.Item;function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.a.createElement("div",{className:"overview-section"},r.a.createElement("h2",null,"Overview"),r.a.createElement(U.a,{size:"small",className:"overview-content"},r.a.createElement(J,{label:"Name"},r.a.createElement(H,{value:e.name,type:"string"})),r.a.createElement(J,{label:"Last Modified"},r.a.createElement(H,{value:e.lastModified,type:"relativeTime"})),r.a.createElement(J,{label:"Runtime"},r.a.createElement(H,{value:e.runtime,type:"string"})),r.a.createElement(J,{label:"Timeout"},r.a.createElement(H,{value:e.timeout,type:"seconds"})),r.a.createElement(J,{label:"Memory Size"},r.a.createElement(H,{value:e.memorySize,type:"megabytes"})),r.a.createElement(J,{label:"Code Size"},r.a.createElement(H,{value:e.codeSize,type:"bytes"}))))}function H(e){var t=e.value,a=e.type;if(!t)return r.a.createElement("span",null,"...");switch(a){case"string":return r.a.createElement("span",null,t);case"bytes":return r.a.createElement("span",null,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var a=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}(parseInt(t)));case"relativeTime":return r.a.createElement(D,{time:t});case"seconds":return r.a.createElement("span",null,t," seconds");case"megabytes":return r.a.createElement("span",null,t," MB")}}function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Z=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={refreshInProgres:!1,loadMoreInProgress:!1,loaded:!1,error:"",currentToken:"",nextToken:"",logStreams:[],lastRefreshed:Date.now(),overviewProps:{lastModified:null,memorySize:null,runtime:null,timeout:null,codeSize:null}},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r,s,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({logGroupName:this.props.tab.logs,region:this.props.tab.region});case 2:if(t=e.sent,a=t.logStreams,n=t.nextToken,r=t.error,s={},!this.props.tab.lambda){e.next=12;break}return e.next=10,S({fnName:this.props.tab.lambda,region:this.props.tab.region});case 10:o=e.sent,s=o.overviewProps;case 12:this.setState({error:r,loaded:!0,logStreams:a,overviewProps:s,nextToken:n});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onRefresh",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r,s,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({refreshInProgres:!0}),e.next=3,k({logGroupName:this.props.tab.logs,region:this.props.tab.region});case 3:if(t=e.sent,a=t.logStreams,n=t.error,r=this.state.logStreams.filter((function(e){return!a.find((function(t){return t.arn===e.arn}))})),s={},!this.props.tab.lambda){e.next=13;break}return e.next=11,S({fnName:this.props.tab.lambda,region:this.props.tab.region});case 11:o=e.sent,s=o.overviewProps;case 13:this.setState({error:n,logStreams:[].concat(Object(i.a)(r),Object(i.a)(a)),refreshInProgres:!1,overviewProps:s,lastRefreshed:Date.now()});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onLoadMore",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loadMoreInProgress:!0}),e.next=3,k({logGroupName:this.props.tab.logs,region:this.props.tab.region,nextToken:this.state.nextToken});case 3:t=e.sent,a=t.logStreams,n=t.nextToken,r=t.error,s=this.state.logStreams.filter((function(e){return!a.find((function(t){return t.arn===e.arn}))})),this.setState({error:r,loadMoreInProgress:!1,logStreams:[].concat(Object(i.a)(s),Object(i.a)(a)),nextToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,this.state.refreshInProgres?r.a.createElement("div",{className:"refresh-option"},"loading..."):r.a.createElement("div",{className:"refresh-option"},r.a.createElement("span",{className:"spanlink",onClick:this.onRefresh.bind(this)},"Refresh"),r.a.createElement("div",{className:"last-refreshed"},"last updated ",r.a.createElement(D,{time:this.state.lastRefreshed}))),this.props.tab.lambda&&r.a.createElement(K,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state.overviewProps,{name:this.props.tab.lambda})),r.a.createElement(z,{tab:this.props.tab,loaded:this.state.loaded,error:this.state.error,logStreams:this.state.logStreams,nextToken:this.state.nextToken,loadMoreInProgress:this.state.loadMoreInProgress,onLoadMore:this.onLoadMore.bind(this)}))}}]),t}(r.a.Component),$=c.a.TabPane;var Q=a(15),X=a(219),_=a(223),ee=a(225),te=a(11),ae=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={inputVisible:!1,inputValue:""},a.handleClose=function(e){var t=a.props.stages.filter((function(t){return t!==e}));a.props.onStagesChange(t)},a.showInput=function(){a.setState({inputVisible:!0},(function(){return a.input.focus()}))},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=function(){var e=a.state.inputValue,t=a.props.stages;e&&-1===t.indexOf(e)&&(t=[].concat(Object(i.a)(t),[e])),a.props.onStagesChange(t),a.setState({inputVisible:!1,inputValue:""})},a.saveInputRef=function(e){return a.input=e},a.input=void 0,a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.inputVisible,n=t.inputValue;return r.a.createElement("div",null,this.props.stages.map((function(t){return r.a.createElement(ee.a,{key:t,closable:!0,onClose:function(){return e.handleClose(t)}},t)})),a&&r.a.createElement(N.a,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:n,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!a&&r.a.createElement(ee.a,{onClick:this.showInput,style:{borderStyle:"dashed"}},r.a.createElement(te.a,{type:"plus"})," Add stage"))}}]),t}(r.a.Component),ne=X.a.Option;function re(e){return r.a.createElement(X.a,{showSearch:!0,defaultValue:e.region,style:e.style||{width:"100%"},onChange:e.setRegion,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},r.a.createElement(ne,{value:"us-east-2"},"us-east-2 (US East, Ohio)"),r.a.createElement(ne,{value:"us-east-1"},"us-east-1 (US East, N. Virginia)"),r.a.createElement(ne,{value:"us-west-1"},"us-west-1 (US West, N. California)"),r.a.createElement(ne,{value:"us-west-2"},"us-west-2 (US West, Oregon)"),r.a.createElement(ne,{value:"ap-east-1"},"ap-east-1 (Asia Pacific, Hong Kong)"),r.a.createElement(ne,{value:"ap-south-1"},"ap-south-1 (Asia Pacific, Mumbai)"),r.a.createElement(ne,{value:"ap-northeast-3"},"ap-northeast-3 (Asia Pacific, Osaka-Local)"),r.a.createElement(ne,{value:"ap-northeast-2"},"ap-northeast-2 (Asia Pacific, Seoul)"),r.a.createElement(ne,{value:"ap-southeast-1"},"ap-southeast-1 (Asia Pacific, Singapore)"),r.a.createElement(ne,{value:"ap-southeast-2"},"ap-southeast-2 (Asia Pacific, Sydney)"),r.a.createElement(ne,{value:"ap-northeast-1"},"ap-northeast-1 (Asia Pacific, Tokyo)"),r.a.createElement(ne,{value:"ca-central-1"},"ca-central-1 (Canada, Central)"),r.a.createElement(ne,{value:"cn-north-1"},"cn-north-1 (China, Beijing)"),r.a.createElement(ne,{value:"cn-northwest-1"},"cn-northwest-1 (China, Ningxia)"),r.a.createElement(ne,{value:"eu-central-1"},"eu-central-1 (EU, Frankfurt)"),r.a.createElement(ne,{value:"eu-west-1"},"eu-west-1 (EU, Ireland)"),r.a.createElement(ne,{value:"eu-west-2"},"eu-west-2 (EU, London)"),r.a.createElement(ne,{value:"eu-west-3"},"eu-west-3 (EU, Paris)"),r.a.createElement(ne,{value:"eu-north-1"},"eu-north-1 (EU, Stockholm)"),r.a.createElement(ne,{value:"me-south-1"},"me-south-1 (Middle East, Bahrain)"),r.a.createElement(ne,{value:"sa-east-1"},"sa-east-1 (South America, Sao Paulo)"),r.a.createElement(ne,{value:"us-gov-east-1"},"us-gov-east-1 (AWS GovCloud, US-East)"),r.a.createElement(ne,{value:"us-gov-west-1"},"us-gov-west-1 (AWS GovCloud, US-West)"))}var se=X.a.Option;function oe(e){var t=Object(n.useState)(),a=Object(Q.a)(t,2),s=a[0],o=a[1],c=Object(n.useState)(!0),l=Object(Q.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)([]),p=Object(Q.a)(m,2),h=p[0],d=p[1],g=Object(n.useState)(e.defaultRegion),f=Object(Q.a)(g,2),v=f[0],b=f[1],E=Object(n.useState)(e.defaultStackName),y=Object(Q.a)(E,2),S=y[0],k=y[1];return Object(n.useEffect)((function(){u(!0),function(e){var t=e.region,a=e.awsProfile;return new Promise((function(e){var n=Math.random();w.postMessage({command:"listCloudFormationStacks",messageId:n,payload:{region:t,awsProfile:a}}),O[n]=function(t){t.error?e({stacks:[],error:t.error}):e({stacks:t.stacks})}}))}({region:v,awsProfile:e.awsProfile}).then((function(e){var t=e.stacks,a=e.error;u(!1),o(a),d(t),k(t[0])}))}),[v]),Object(n.useEffect)((function(){e.onChange(S,e.stage,v)}),[S]),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("td",{style:{width:100}},"Region"),r.a.createElement("td",null,r.a.createElement(re,{region:v,setRegion:b,style:{width:250}}))),r.a.createElement("tr",null,r.a.createElement("td",{style:{minWidth:100}},"Stack name"),r.a.createElement("td",null,i?r.a.createElement("div",null,"loading..."):s?r.a.createElement("div",null,s):0===h.length?r.a.createElement("div",null,"No stacks found"):r.a.createElement(X.a,{showSearch:!0,style:{width:250},value:S,onChange:k,placeholder:"Select a CloudFormation Stack",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},h.map((function(e){return r.a.createElement(se,{key:e,value:e},e)}))))))}function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var le=c.a.TabPane,ie=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).newTabIndex=void 0,a.state=void 0,a.onChange=function(e){a.setState({activeKey:e})},a.onEdit=function(e,t){a[t](e)},a.add=function(){if(!a.state.newStageVal||a.state.panes.find((function(e){return e.stage===a.state.newStageVal})))return!1;var e=a.state.panes,t=a.state.newStageVal;e.push({stage:a.state.newStageVal}),a.setState({panes:e,activeKey:t,newStageVal:""})},a.remove=function(e){var t,n=a.state.activeKey;a.state.panes.forEach((function(a,n){a.stage===e&&(t=n-1)}));var r=a.state.panes.filter((function(t){return t.stage!==e}));r.length&&n===e&&(n=t>=0?r[t].stage:r[0].stage),a.setState({panes:r,activeKey:n}),a.props.onChange(r)},a.newTabIndex=0,a.state={newStageVal:"",activeKey:e.defaultStages[0].stage,panes:e.defaultStages},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",{style:{width:"70%",maxWidth:450}},r.a.createElement(c.a,{hideAdd:!0,onChange:this.onChange,activeKey:this.state.activeKey,size:"small",type:"editable-card",animated:!0,onEdit:this.onEdit},this.state.panes.map((function(t){return r.a.createElement(le,{tab:t.stage,key:t.stage},r.a.createElement(oe,{awsProfile:e.props.awsProfile,defaultRegion:t.region||e.props.defaultRegion,defaultStackName:t.stage,stage:e.state.activeKey,onChange:function(t,a,n){var r=e.state.panes.map((function(e){return e.stage===a?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{region:n,stackName:t}):e}));e.setState({panes:r}),e.props.onChange(r)}}))})))),r.a.createElement("div",{style:{width:"30%",marginTop:18}},r.a.createElement(N.a,{style:{borderTop:0,borderLeft:0,borderRight:0},value:this.state.newStageVal,onChange:function(t){return e.setState({newStageVal:t.target.value})},placeholder:"add new stage",onPressEnter:this.add})))}}]),t}(r.a.Component),ue=X.a.Option;function me(e){var t=Object(n.useState)(e.source),a=Object(Q.a)(t,2),s=a[0],o=a[1],c=Object(n.useState)(e.awsProfile),l=Object(Q.a)(c,2),i=l[0],u=l[1],h=Object(n.useState)(e.title),d=Object(Q.a)(h,2),g=d[0],f=d[1],v=Object(n.useState)(e.title),b=Object(Q.a)(v,2),E=b[0],y=b[1],w=Object(n.useState)(!Boolean(e.title)),O=Object(Q.a)(w,2),S=O[0],k=O[1],j=Object(n.useState)(e.cwd),M=Object(Q.a)(j,2),C=M[0],T=M[1],R=Object(n.useState)(e.print),I=Object(Q.a)(R,2),L=I[0],A=I[1],D=Object(n.useState)(e.offset),q=Object(Q.a)(D,2),V=q[0],G=q[1],F=Object(n.useState)(e.stages),W=Object(Q.a)(F,2),z=W[0],U=W[1],J=Object(n.useState)({}),K=Object(Q.a)(J,2),H=K[0],Y=K[1],Z=Object(n.useState)([]),$=Object(Q.a)(Z,2),ee=$[0],te=$[1],ne=Object(n.useState)([]),re=Object(Q.a)(ne,2),se=re[0],oe=re[1],ce=r.a.createRef(),le=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],r=[],i||(n.push("awsProfile"),r.push("AWS Profile is required")),"serverless"!==s){t.next=19;break}if(L||(n.push("print"),r.push("Print command is required")),C||(n.push("cwd"),r.push("Relative directory is required")),g||S||(n.push("title"),r.push("Title is required")),0===z.length&&(n.push("stages"),r.push("At least one stage must be defined")),0!==r.length){t.next=17;break}return t.prev=9,t.next=12,P({source:s,awsProfile:i,cwd:C,print:L,offset:V,stages:z,stacks:H,title:g});case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(9),r.push(t.t0.message);case 17:t.next=32;break;case 19:if("cloudformation"!==s){t.next=32;break}if(E||(n.push("cfTitle"),r.push("Title is required")),0===H.length&&r.push("At least one stage must be defined"),H.length&&H.find((function(e){return!e.stackName}))&&(c=H.find((function(e){return!e.stackName})),r.push("Missing stack name in stage ".concat(c.title))),0!==r.length){t.next=32;break}return t.prev=24,t.next=27,P({source:s,awsProfile:i,offset:V,stacks:H,title:E});case 27:t.next=32;break;case 29:t.prev=29,t.t1=t.catch(24),r.push(t.t1.message);case 32:0===r.length&&(o(e.source),u(e.awsProfile),f(e.title),y(e.title),k(!Boolean(e.title)),T(e.cwd),A(e.print),G(e.offset),U(e.stages)),te(n),oe(r),a.target.blur();case 36:case"end":return t.stop()}}),t,null,[[9,14],[24,29]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("table",{className:"form-table"},r.a.createElement("tr",null,r.a.createElement("td",{className:"td-left"},"Source"),r.a.createElement("td",null,r.a.createElement(X.a,{defaultValue:s,className:ee.includes("source")&&"error",style:{width:"100%"},onChange:o},r.a.createElement(ue,{value:"serverless"},"Serverless Framework (AWS)"),r.a.createElement(ue,{value:"cloudformation"},"CloudFormation (AWS)")))),r.a.createElement("tr",null,r.a.createElement("td",{className:"td-left"},"AWS Profile"),r.a.createElement("td",null,r.a.createElement(N.a,{className:ee.includes("awsProfile")&&"error",value:i,onChange:function(e){return u(e.target.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",{className:"td-left"},"Time offset (minutes)"),r.a.createElement("td",null,r.a.createElement(_.a,{className:ee.includes("offset")&&"error",value:V,onChange:function(e){G("number"===typeof e?e:0)}}))),"serverless"===s&&[r.a.createElement("tr",null,r.a.createElement("td",{className:"td-left"},"Title"),r.a.createElement("td",null,r.a.createElement(x.a,{className:"config-title",style:{opacity:S?1:.5},checked:S,onChange:function(e){k(e.target.checked),ce.current.focus()}},"Same as the service name"),r.a.createElement(N.a,{className:ee.includes("title")?"error custom-title":"custom-title",style:{opacity:S?0:1},ref:ce,value:g,onChange:function(e){return f(e.target.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",{className:"td-left"},"Relative directory"),r.a.createElement("td",null,r.a.createElement(N.a,{className:ee.includes("cwd")&&"error",value:C,onChange:function(e){T(e.target.value||"./")}}))),r.a.createElement("tr",null,r.a.createElement("td",{className:"td-left"},"Print command"),r.a.createElement("td",null,r.a.createElement(N.a,{className:ee.includes("print")&&"error",value:L,onChange:function(e){return A(e.target.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",{className:"td-left"},"Stages"),r.a.createElement("td",{className:ee.includes("stages")&&"error"},r.a.createElement(ae,{stages:z,onStagesChange:U})))],"cloudformation"===s&&[r.a.createElement("tr",null,r.a.createElement("td",{className:"td-left"},"Title"),r.a.createElement("td",null,r.a.createElement(N.a,{className:ee.includes("cfTitle")&&"error",placeholder:"Service Title",value:E,onChange:function(e){return y(e.target.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement(ie,{awsProfile:i,defaultStages:e.stacks,defaultRegion:e.region,onChange:function(e){Y(e)}})))]),r.a.createElement(B.a,{className:"submit-button",onClick:le},"Add Service"),r.a.createElement("div",{className:"error-desc-wrap"},se.map((function(e,t){return r.a.createElement("p",{key:t},e)}))))}a(214);o.a.render("createService"===document.vscodeData.page?r.a.createElement((function(){return r.a.createElement("div",{className:"create-page-root"},r.a.createElement("div",null,r.a.createElement(me,{awsProfile:"default",source:"serverless",cwd:"./",offset:0,print:"serverless print",region:"us-east-1",stages:["dev"],stacks:[{stage:"dev",stackName:null}]})))}),null):r.a.createElement((function(){return r.a.createElement(c.a,{animated:!1},document.vscodeData.tabs.map((function(e){return r.a.createElement($,{tab:e.title,key:e.title},r.a.createElement(Z,{tab:e}))})))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[125,1,2]]]);