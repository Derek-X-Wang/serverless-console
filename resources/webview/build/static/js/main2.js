(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{109:function(e,t,a){e.exports=a(189)},111:function(e,t,a){},116:function(e,t,a){},119:function(e,t,a){},176:function(e,t,a){},189:function(e,t,a){"use strict";a.r(t);a(110),a(111);var r=a(0),s=a.n(r),n=a(20),o=a.n(n);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(116);var c=a(191),i=a(52),l=a(15),m=a(14),u=a.n(m),p=a(30),h=a(21),g=a(22),d=a(24),f=a(23),v=a(25),y=a(192),b=a(41),k=a.n(b),E={postMessage:console.log};try{E=acquireVsCodeApi()}catch(H){}var w={};function O(e){return new Promise((function(t){var a=Math.random();E.postMessage({command:"getLambdaOverview",messageId:a,payload:{fnName:e}}),w[a]=function(e){e.error?t({overviewProps:{},error:e.error}):t({overviewProps:e})}}))}function S(e,t){return new Promise((function(a){var r=Math.random();E.postMessage({command:"getLogStreams",messageId:r,payload:{nextToken:t,logGroupName:e}}),w[r]=function(e){e.error?a({logStreams:[],error:e.error}):a({nextToken:e.nextToken,logStreams:e.logStreams})}}))}function j(e){return new Promise((function(t){var a=Math.random();E.postMessage({command:"getLogEvents",messageId:a,payload:{nextToken:e.nextToken,logGroup:e.logGroup,logStream:e.logStream}}),w[a]=function(e){t({nextBackwardToken:e.nextBackwardToken,nextForwardToken:e.nextForwardToken,logEvents:e.logEvents})}}))}window.addEventListener("message",(function(e){var t=e.data;w[t.messageId]&&(w[t.messageId](t.payload),delete w[t.messageId])}));var M=a(193),x=a(194),N=a(73),P=a.n(N),T=(a(119),a(197)),R=a(99),L=a(96),I=a.n(L),B=a(77);T.a.registerLanguage("json",R.a);var D=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={copyStr:"copy JSON to clipboard",searched:!1,loaded:!1},a.myRef=void 0,a.myRef=s.a.createRef(),a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({loaded:!0})}),0)}},{key:"componentDidUpdate",value:function(){var e=this;if(this.props.search)!1===this.state.searched&&this.setState({searched:!0}),(t=new P.a(this.myRef.current)).unmark({done:function(){t.mark(e.props.search,{acrossElements:!0,separateWordSearch:!1})}});else if(this.state.searched){var t;(t=new P.a(this.myRef.current)).unmark()}}},{key:"renderWithJson",value:function(e){var t=this,a=function(e){var t=e.match(/{[\s\S]*}/);if(t)try{var a=JSON.parse(t[0]),r=e.split(t[0]);return[r[0],JSON.stringify(a,null,2),r[1]]}catch(H){return!1}return!1}(e);return a?s.a.createElement("div",{className:"logevent-longmessage"},s.a.createElement("div",null,a[0]),s.a.createElement("div",{className:"code-wrapper"},s.a.createElement(B.a,{size:"small",onClick:function(e){e.currentTarget.blur(),I()(a[1]),t.setState({copyStr:"copied"}),setTimeout((function(){t.setState({copyStr:"copy JSON to clipboard"})}),1e3)}},this.state.copyStr),s.a.createElement(T.a,{className:"syntax-highlighter",useInlineStyles:!1,language:"json",showLineNumbers:!0},a[1])),s.a.createElement("div",null,a[2])):s.a.createElement("div",{className:"logevent-longmessage"},e)}},{key:"render",value:function(){return s.a.createElement("div",{ref:this.myRef},this.state.loaded?this.renderWithJson(this.props.message):s.a.createElement("div",null,"loading"))}}]),t}(s.a.Component);var C=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;setInterval((function(){return e.setState({interval:Date.now()})}),1e4)}},{key:"render",value:function(){return s.a.createElement("span",{className:this.props.className},k()(this.props.time).fromNow())}}]),t}(s.a.Component);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var z=y.a.Panel,G=function(e){function t(){var e,a;Object(h.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).state={search:"",groupPerRequest:document.vscodeData.groupPerRequest,loaded:!1,preparedMessages:[],messages:[]},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({logGroup:this.props.logGroup,logStream:this.props.logStream});case 2:t=e.sent,a=t.logEvents,r=t.nextBackwardToken,s=t.nextForwardToken,this.setState({loaded:!0,nextBackwardToken:r,nextForwardToken:s,messages:a.map((function(e,t){return{timestamp:e.timestamp,messageShort:e.message.slice(0,500),messageLong:e.message}})),preparedMessages:J(a.map((function(e,t){return{timestamp:e.timestamp,messageShort:e.message.slice(0,500),messageLong:e.message}})),this.state.groupPerRequest,this.state.search)});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onRetryNew",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loadingNew:!0}),e.next=3,j({logGroup:this.props.logGroup,logStream:this.props.logStream,nextToken:this.state.nextForwardToken});case 3:t=e.sent,a=t.logEvents,r=t.nextForwardToken,this.setState({loadingNew:!1,messages:[].concat(Object(l.a)(this.state.messages),Object(l.a)(a.map((function(e,t){return{timestamp:e.timestamp,messageShort:e.message.slice(0,500),messageLong:e.message}})))),preparedMessages:J([].concat(Object(l.a)(this.state.messages),Object(l.a)(a.map((function(e,t){return{timestamp:e.timestamp,messageShort:e.message.slice(0,500),messageLong:e.message}})))),this.state.groupPerRequest,this.state.search),nextForwardToken:r});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onRetryOld",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loadingOld:!0}),e.next=3,j({logGroup:this.props.logGroup,logStream:this.props.logStream,nextToken:this.state.nextBackwardToken});case 3:t=e.sent,a=t.logEvents,r=t.nextBackwardToken,this.setState({loadingOld:!1,messages:[].concat(Object(l.a)(a.map((function(e,t){return{timestamp:e.timestamp,messageShort:e.message.slice(0,500),messageLong:e.message}}))),Object(l.a)(this.state.messages)),preparedMessages:J([].concat(Object(l.a)(a.map((function(e,t){return{timestamp:e.timestamp,messageShort:e.message.slice(0,500),messageLong:e.message}}))),Object(l.a)(this.state.messages)),this.state.groupPerRequest,this.state.search),nextBackwardToken:r});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.loaded?[s.a.createElement("div",{className:"logstream-options",key:"options"},s.a.createElement(M.a.Search,{onChange:function(t){e.setState({search:t.target.value,preparedMessages:J(e.state.messages,e.state.groupPerRequest,t.target.value)})},value:this.state.search,placeholder:"search",allowClear:!0,size:"small"}),s.a.createElement(x.a,{checked:this.state.groupPerRequest,onChange:function(t){e.setState({groupPerRequest:t.target.checked,preparedMessages:J(e.state.messages,t.target.checked,e.state.search)})}},"Group per request")),s.a.createElement("div",{className:"retry-message retry-message-old",key:"retryold"},this.state.loadingOld?"loading older events...":s.a.createElement("span",null,"No older events found at the moment.",s.a.createElement("span",{className:"spanlink retry-link",onClick:this.onRetryOld.bind(this)},"Retry"))),s.a.createElement(y.a,{key:"collapse",bordered:!1},this.state.preparedMessages.map((function(t){return s.a.createElement(z,{key:t.key,className:0===t.searchMatches?"blurforsearch":"",header:s.a.createElement("div",{className:"logevent-header"},s.a.createElement(C,{className:"relative-time",time:t.timestamp}),s.a.createElement("span",{className:"abs-time"},k()(t.timestamp).format("lll")),s.a.createElement("span",{className:"logevent-shortmessage"},t.searchMatches>0&&s.a.createElement("span",{className:"event-tag matches"},"matches: ",t.searchMatches),t.shortMessageMatched&&t.shortMessageMatched.length?t.shortMessageMatched.map((function(e){return s.a.createElement("span",{className:"event-tag"},e)})):t.messageShort))},t.messagesLong.map((function(t,a){return s.a.createElement(D,{key:a,message:t,search:e.state.search})})))}))),s.a.createElement("div",{className:"retry-message retry-message-new",key:"retrynew"},this.state.loadingNew?"loading new events...":s.a.createElement("span",null,"No newer events found at the moment.",s.a.createElement("span",{className:"spanlink retry-link",onClick:this.onRetryNew.bind(this)},"Retry")))]:s.a.createElement("div",{className:"retry-message"},"loading new events...")}}]),t}(s.a.Component);function J(e,t,a){var r=[],s=e.map((function(e,t){var s="",n=e.messageLong.match(/START RequestId: ([a-zA-z0-9\-]*)/),o=e.messageLong.match(/REPORT RequestId: ([a-zA-z0-9\-]*)/),c=!0,l=!1,m=void 0;try{for(var u,p=r[Symbol.iterator]();!(c=(u=p.next()).done);c=!0){var h=u.value;if(e.messageShort.includes(h)){s=h;break}}}catch(H){l=!0,m=H}finally{try{c||null==p.return||p.return()}finally{if(l)throw m}}n&&(r.push(n[1]),s=n[1]);var g=[];if(o){s=o[1];var d=e.messageShort.match(/Duration: (.*?) ms/),f=e.messageShort.match(/Max Memory Used: (.*?) MB/),v=e.messageShort.match(/Init Duration: (.*?) ms/);v&&g.push("init: ".concat(v[1]," ms")),d&&g.push("".concat(d[1]," ms")),f&&g.push("".concat(f[1]," MB"))}var y=-1;if(a){var b=a.replace(/\s\s+/g," ").toLowerCase(),k=function(e){var t=e.match(/{[\s\S]*}/);if(t)try{var a=JSON.parse(t[0]),r=e.split(t[0]);return"".concat(r[0],"\n      ").concat(JSON.stringify(a,null,2),"\n      ").concat(r[1])}catch(H){return e}return e}(e.messageLong).replace(/\s\s+/g," ").toLowerCase().match(new RegExp(b,"g"));y=k?k.length:0}var E="".concat(t,"-").concat(e.timestamp);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{requestId:s||E,messagesLong:[e.messageLong],shortMessageMatched:g,searchMatches:y,index:t,key:E})}));if(!t)return s;var n=s.reduce((function(e,t){return e[t.requestId]?e[t.requestId].push(t):e[t.requestId]=[t],e}),{}),o=[];return Object.keys(n).forEach((function(e){var t,a=n[e],r=a.find((function(e){return e.shortMessageMatched.length}));r&&(t=r.shortMessageMatched),o.push({timestamp:a[0].timestamp,key:a[0].key,index:a[0].index,shortMessageMatched:t,searchMatches:a.reduce((function(e,t){return e+t.searchMatches}),0),messageShort:a[0].messageShort,messagesLong:a.map((function(e){return e.messageLong}))})})),o.sort((function(e,t){return e.index-t.index}))}var F=y.a.Panel,A=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"log-section"},s.a.createElement("header",null,s.a.createElement("h2",null,"Logs")),this.props.loaded?s.a.createElement("div",null,s.a.createElement(y.a,{className:"logstreamslist"},this.props.error?s.a.createElement("div",{className:"foreground-color"},this.props.error):this.props.logStreams.sort((function(e,t){return t.sortByTimestamp-e.sortByTimestamp})).map((function(t){return s.a.createElement(F,{header:s.a.createElement("div",{className:"logstream"},s.a.createElement(C,{className:"relative-time",time:t.sortByTimestamp}),s.a.createElement("span",{className:"abs-time"},k()(t.sortByTimestamp).format("lll"))),key:t.arn},s.a.createElement(G,{logGroup:e.props.tab.logs,logStream:t.logStreamName}))}))),this.props.nextToken&&s.a.createElement("div",{className:" loadmore"},this.props.loadMoreInProgress?s.a.createElement("span",null,"loading..."):s.a.createElement("span",{className:"spanlink",onClick:this.props.onLoadMore},"Load more"))):s.a.createElement("div",null,"loading"))}}]),t}(s.a.Component),W=(a(176),a(196)),U=W.a.Item;function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.a.createElement("div",{className:"overview-section"},s.a.createElement("h2",null,"Overview"),s.a.createElement(W.a,{size:"small",className:"overview-content"},s.a.createElement(U,{label:"Name"},s.a.createElement(V,{value:e.name,type:"string"})),s.a.createElement(U,{label:"Last Modified"},s.a.createElement(V,{value:e.lastModified,type:"relativeTime"})),s.a.createElement(U,{label:"Runtime"},s.a.createElement(V,{value:e.runtime,type:"string"})),s.a.createElement(U,{label:"Timeout"},s.a.createElement(V,{value:e.timeout,type:"seconds"})),s.a.createElement(U,{label:"Memory Size"},s.a.createElement(V,{value:e.memorySize,type:"megabytes"})),s.a.createElement(U,{label:"Code Size"},s.a.createElement(V,{value:e.codeSize,type:"bytes"}))))}function V(e){var t=e.value,a=e.type;if(!t)return s.a.createElement("span",null,"...");switch(a){case"string":return s.a.createElement("span",null,t);case"bytes":return s.a.createElement("span",null,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var a=t<0?0:t,r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}(parseInt(t)));case"relativeTime":return s.a.createElement(C,{time:t});case"seconds":return s.a.createElement("span",null,t," seconds");case"megabytes":return s.a.createElement("span",null,t," MB")}}function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var Z=function(e){function t(){var e,a;Object(h.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).state={refreshInProgres:!1,loadMoreInProgress:!1,loaded:!1,error:"",currentToken:"",nextToken:"",logStreams:[],lastRefreshed:Date.now(),overviewProps:{lastModified:null,memorySize:null,runtime:null,timeout:null,codeSize:null}},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,a,r,s,n,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(this.props.tab.logs);case 2:if(t=e.sent,a=t.logStreams,r=t.nextToken,s=t.error,n={},!this.props.tab.lambda){e.next=12;break}return e.next=10,O(this.props.tab.lambda);case 10:o=e.sent,n=o.overviewProps;case 12:this.setState({error:s,loaded:!0,logStreams:a,overviewProps:n,nextToken:r});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onRefresh",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,a,r,s,n,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({refreshInProgres:!0}),e.next=3,S(this.props.tab.logs);case 3:if(t=e.sent,a=t.logStreams,r=t.error,s=this.state.logStreams.filter((function(e){return!a.find((function(t){return t.arn===e.arn}))})),n={},!this.props.tab.lambda){e.next=13;break}return e.next=11,O(this.props.tab.lambda);case 11:o=e.sent,n=o.overviewProps;case 13:this.setState({error:r,logStreams:[].concat(Object(l.a)(s),Object(l.a)(a)),refreshInProgres:!1,overviewProps:n,lastRefreshed:Date.now()});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onLoadMore",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,a,r,s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loadMoreInProgress:!0}),e.next=3,S(this.props.tab.logs,this.state.nextToken);case 3:t=e.sent,a=t.logStreams,r=t.nextToken,s=t.error,n=this.state.logStreams.filter((function(e){return!a.find((function(t){return t.arn===e.arn}))})),this.setState({error:s,loadMoreInProgress:!1,logStreams:[].concat(Object(l.a)(n),Object(l.a)(a)),nextToken:r});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",null,this.state.refreshInProgres?s.a.createElement("div",{className:"refresh-option"},"loading..."):s.a.createElement("div",{className:"refresh-option"},s.a.createElement("span",{className:"spanlink",onClick:this.onRefresh.bind(this)},"Refresh"),s.a.createElement("div",{className:"last-refreshed"},"last updated ",s.a.createElement(C,{time:this.state.lastRefreshed}))),this.props.tab.lambda&&s.a.createElement(K,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state.overviewProps,{name:this.props.tab.lambda})),s.a.createElement(A,{tab:this.props.tab,loaded:this.state.loaded,error:this.state.error,logStreams:this.state.logStreams,nextToken:this.state.nextToken,loadMoreInProgress:this.state.loadMoreInProgress,onLoadMore:this.onLoadMore.bind(this)}))}}]),t}(s.a.Component),$=c.a.TabPane;o.a.render(s.a.createElement((function(){return s.a.createElement(c.a,{animated:!1},document.vscodeData.tabs.map((function(e){return s.a.createElement($,{tab:e.title,key:e.title},s.a.createElement(Z,{tab:e}))})))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[109,1,2]]]);